<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
      "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
      "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>

    <!-- ========== Data Source Configuration =============================== -->
    <data-sources />

    <!-- ========== Form Bean Definitions ================================== -->
    <form-beans type="org.apache.struts.action.ActionFormBean">
        <form-bean name="authenticationForm"
				type="org.apache.struts.validator.DynaValidatorForm" 
            	dynamic="true">
            <form-property name="username" type="java.lang.String" />
            <form-property name="password" type="java.lang.String" />
        </form-bean>
        <form-bean name="errorMailForm"
				type="org.apache.struts.validator.DynaValidatorForm" 
            	dynamic="true">
            <form-property name="email" type="java.lang.String" />
            <form-property name="subject" type="java.lang.String" />
            <form-property name="body" type="java.lang.String" />
        </form-bean>
		<form-bean name="changeLocaleForm"
				type="org.apache.struts.validator.DynaValidatorForm"
				dynamic="true">
	   		<form-property name="windowLocation" type="java.lang.String"/>
   			<form-property name="newLanguage" type="java.lang.String"/>
   			<form-property name="newCountry" type="java.lang.String"/>
		</form-bean>
    </form-beans>

    <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
        <exception type="java.lang.Exception"
				key="error.Exception"
            	handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
			/>
		<exception type="net.sourceforge.fenixedu.applicationTier.Servico.exceptions.NotAuthorizedException"
				key="error.NotAuthorized"
				handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
			/>
	</global-exceptions>

    <!-- ========== Global Forward Definitions =============================== -->
    <global-forwards type="org.apache.struts.action.ActionForward">
        <forward name="index" path="/index.do" redirect="true"/>
        <forward name="logoff" path="/logoff.do" contextRelative="true"/>
        <forward name="home" path="/mainPortalPage.jsp" redirect="true" contextRelative="true"/>
        <forward name="firstPage" path="/loginPage.jsp"/>
        <forward name="exceptionHandling" path="/exceptionHandlingAction.do?method=goBack" contextRelative="true"/>
    </global-forwards>

    <!-- ========== Action Mapping Definitions =============================== -->
    <action-mappings type="org.apache.struts.action.ActionMapping">
		<action path="/showErrorPage" forward="/exception/error.jsp"/>
        <action path="/naoAutorizado" forward="/error.jsp"/>
        <action path="/naoExecutado" forward="/error.jsp"/>
		<action path="/notAuthorized" forward="/exception/notAuthorized.jsp"/>
        <action path="/autenticacao" forward="/autenticacao.jsp" />
        <action path="/naoExistente" forward="/error.jsp" />
        <action path="/nonExistingObject" forward="/nonExistingError.jsp"/>

	    <action path="/changeLocaleTo"
	    		name="changeLocaleForm"
	    		validate="false"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.publico.ChangeLocale">
		    <forward name="something" path="/lalaland"/>
	    </action>

	    <action path="/siteMap"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.SiteMapAction">
		    <forward name="site-map" path="/siteMap.jsp"/>
	    </action>

        <action path="/home"
				type="net.sourceforge.fenixedu.presentationTier.Action.base.FenixForwardAction" 
            	parameter="/person/index.do"/>
        <action path="/login"
				type="net.sourceforge.fenixedu.presentationTier.Action.AuthenticationAction" 
            	name="authenticationForm"
				input="/loginPage.jsp"
				scope="request" 
            	className="net.sourceforge.fenixedu.presentationTier.mapping.ActionMappingForAuthentication">
            <set-property property="application" value="@application@"/>
            <forward name="sucess" path="/home.do"/>
        </action>
        <action path="/logoff"
				type="net.sourceforge.fenixedu.presentationTier.Action.commons.LogOffAction">
            <forward name="Success" path="/loginPage.jsp"/>
        </action>
        <action path="/dotIstPortal" type="net.sourceforge.fenixedu.presentationTier.Action.base.FenixSwitchAction">
        </action>
        <action path="/exceptionHandlingAction"
				parameter="method"
				name="errorMailForm"
				scope="request" 
            	type="net.sourceforge.fenixedu.presentationTier.Action.ExceptionHandlingAction" >
        </action>
        <action path="/isAlive"
				type="net.sourceforge.fenixedu.presentationTier.Action.CheckIsAliveAction">
            <forward name="Success" path="/ok.jsp"/>
        </action>
    </action-mappings>

    <!-- ========== Controller Configuration ================================ -->
	<controller processorClass="net.sourceforge.fenixedu.presentationTier.processor.FenixRequestProcessorWithTiles"/>

    <!-- ========== Message Resources Definitions ============================ -->
	<message-resources parameter="ServidorApresentacao.GlobalResources" key="GLOBAL_RESOURCES" null="false"/>
    <message-resources parameter="ServidorApresentacao.ApplicationResources" key="DEFAULT" null="false"/>
    <message-resources parameter="ServidorApresentacao.PortalResources" key="PORTAL_RESOURCES" null="false"/>
    <message-resources parameter="ServidorApresentacao.EnumerationResources" key="ENUMERATION_RESOURCES" null="false"/>
    <message-resources parameter="ServidorApresentacao.StudentResources" key="STUDENT_RESOURCES" null="false"/>
    <message-resources parameter="ServidorApresentacao.TeacherCreditsSheetResources" key="TEACHER_CREDITS_SHEET_RESOURCES" null="false"/>
    <message-resources parameter="ServidorApresentacao.GEPResources" key="GEP_RESOURCES" null="false"/>
    <message-resources parameter="ServidorApresentacao.DegreeAdministrativeOfficeResources" key="DEGREE_ADM_OFFICE" null="false"/>
	<message-resources parameter="ServidorApresentacao.SchoolRegistrationResources" key="SCHOOL_REGISTRATION_RESOURCES" null="false"/>
	<message-resources parameter="ServidorApresentacao.CurriculumHistoricResources" key="CURRICULUM_HISTORIC_RESOURCES" null="false"/>
	<message-resources parameter="ServidorApresentacao.InquiriesResources" key="INQUIRIES_RESOURCES" null="false"/>
    <message-resources parameter="ServidorApresentacao.PublicDegreeInformation" key="PUBLIC_DEGREE_INFORMATION" null="false"/>
   	<message-resources parameter="ServidorApresentacao.ManagerResources" key="MANAGER_RESOURCES" null="false"/> 

    <!-- ========== Plug Ins Configuration ================================= -->
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
        <set-property property="pathnames" value="/WEB-INF/validator-rules.xml,/WEB-INF/conf/validation-default.xml"/>
    </plug-in>
    <plug-in className="org.apache.struts.tiles.TilesPlugin" >
        <set-property property="definitions-config" value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml" />
        <set-property property="moduleAware" value="true" />
        <set-property property="definitions-parser-validate" value="true" />
    </plug-in>

</struts-config>

