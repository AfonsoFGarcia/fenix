<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
      "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
      "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
    
    <!-- ========== Data Source Configuration =============================== -->
    <data-sources />
    
    <!-- ========== Form Bean Definitions ================================== -->
    <form-beans type="org.apache.struts.action.ActionFormBean">
      <!-- Dynamic-FormBean para Autorizacao -->
      <form-bean name="autenticacaoForm" 
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
        <form-property name="utilizador" type="java.lang.String" />
        <form-property name="password" type="java.lang.String" />
      </form-bean>
      <form-bean name="obterSitioForm" 
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
        <form-property name="nomeSitio" type="java.lang.String" />
        <form-property name="nomeSeccao" type="java.lang.String" />
      </form-bean>
    </form-beans>
    
    <!-- ========== Global Exception Definitions ============================== -->
    <global-exceptions>
	    <exception type="ServidorAplicacao.Servico.ExcepcaoInexistente"
	           key="ServidorAplicacao.Servico.ExcepcaoInexistente"
	           path="/naoExistente.do"/>
    </global-exceptions>
    
    <!-- ========== Global Forward Definitions =============================== -->
    <global-forwards type="org.apache.struts.action.ActionForward">
	  <forward name="index" path="index.do" redirect="true"/>
      <forward name="student" path="/student"
               contextRelative="true" redirect="true" />
      <forward name="docente" path="/docente"
               contextRelative="true" redirect="true" />
      <forward name="sop" path="/sop"
               contextRelative="true" redirect="true" />
      <forward name="publico" path="/publico"
               contextRelative="true" redirect="true" />
    </global-forwards>
    
    <!-- ========== Action Mapping Definitions =============================== -->
    <action-mappings type="org.apache.struts.action.ActionMapping">
      <!-- page fronting actions -->
      <action path="/index" forward="/autenticacao.jsp"/>
      <action path="/autenticacao" forward="/autenticacao.jsp"/>
      <action path="/naoExistente" forward="/naoExistente.jsp"/>

      <!-- action definition -->
      <action name="autenticacaoForm"
              type="ServidorApresentacao.Action.AutenticacaoFormAction"
              path="/autenticacaoForm"
              input="/autenticacao.jsp"
              scope="request"
              attribute="autenticacaoForm">
        <exception type="ServidorAplicacao.NotExecutedException"
                   key="ServidorAplicacao.NotExecutedException"
                   path="/autenticacao.do"/>
        <exception type="ServidorAplicacao.Servico.ExcepcaoAutenticacao"
                   key="ServidorAplicacao.Servico.ExcepcaoAutenticacao"
                   path="/autenticacao.do"/>
        <forward name="Docente" path="/docente"
                 contextRelative="true" redirect="true"/>
        <forward name="Aluno" path="/aluno"
                 contextRelative="true" redirect="true"/>
        <forward name="SOP" path="/sop"
                 contextRelative="true" redirect="true"/>
        <forward name="Publico" path="/publico"
                 contextRelative="true" redirect="true"/>
      </action>

      <action type="ServidorApresentacao.Action.ObterSitiosAction"
              path="/obterSitios">
        <forward name="MostrarSitios" path="seleccionarSitio"/>
	  </action>
	  
      <action name="obterSitioForm"
              type="ServidorApresentacao.Action.ObterSitioAction"
              path="/obterSitio">
        <exception type="ServidorAplicacao.Servico.ExcepcaoInexistente"
                   key="ServidorAplicacao.Servico.ExcepcaoInexistente"
                   path="/obterSitios.do"/>
        <forward name="ObterSeccao" path="/obterSeccao.do"/>
	  </action>
	  
      <action attribute="obterSeccaoForm"
              name="obterSitioForm"
              type="ServidorApresentacao.Action.ObterSeccaoAction"
              path="/obterSeccao">
        <exception type="ServidorApresentacao.Action.FenixAction.ExcepcaoSessaoInexistente"
                   key="ServidorApresentacao.Action.FenixAction.ExcepcaoSessaoInexistente"
                   path="/obterSitios.do"/>
        <forward name="MostrarSeccao" path="mostrarSitio"/>
	  </action>
	  
    </action-mappings>
    
    <!-- ========== Controller Configuration ================================ -->
    <controller />
    
    <!-- ========== Message Resources Definitions ============================ -->
    <message-resources parameter="ServidorApresentacao.ApplicationResources" />
    
    <!-- ========== Plug Ins Configuration ================================= -->
 <!--   <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" 
                    value="/WEB-INF/validator-rules.xml,/WEB-INF/conf/validation-default.xml"/>
    </plug-in> -->

</struts-config>

