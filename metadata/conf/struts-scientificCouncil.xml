<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE struts-config PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
	"http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>

	<!-- ========== Data Source Configuration =============================== -->

	<!-- ========== Form Bean Definitions ================================== -->
	<form-beans type="org.apache.struts.action.ActionFormBean">
	
      <!-- Dynamic-FormBean for basic curricular course selection -->
     <form-bean name="selectBasicCurricularCourses"
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
         <form-property name="basicCurricularCourses" type="java.lang.String[]" />  
      </form-bean>
      
      <form-bean name="curriculumForm"
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
         <form-property name="program" type="java.lang.String" />  
         <form-property name="programEn" type="java.lang.String" />  
         <form-property name="operacionalObjectives" type="java.lang.String" />  
         <form-property name="operacionalObjectivesEn" type="java.lang.String" />  
         <form-property name="generalObjectives" type="java.lang.String" />  
         <form-property name="generalObjectivesEn" type="java.lang.String" />  
         
      </form-bean>
		      
      <form-bean name="creditsReportForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
      	<form-property name="fromExecutionPeriodID" type="java.lang.String" />
      	<form-property name="untilExecutionPeriodID" type="java.lang.String" />      	
      	<form-property name="unitID" type="java.lang.Integer" />
      	<form-property name="departmentID" type="java.lang.Integer" />      	
      	<form-property name="method" type="java.lang.String" />      	
      </form-bean>
      
      <form-bean name="masterDegreeCreditsForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
      	<form-property name="executionYearID" type="java.lang.Integer"/>
      	<form-property name="executionDegreeID" type="java.lang.Integer"/>
      	<form-property name="curricularCourseID" type="java.lang.Integer"/>
      	<form-property name="masterDegreeCurricularPlanID" type="java.lang.Integer"/>
      	<form-property name="hoursMap" type="java.util.HashMap"/>      	
      	<form-property name="creditsMap" type="java.util.HashMap"/>   
      	
      	<!-- for the edition of professorships -->
      	<form-property name="professorShipTeachersIds" type="java.lang.Integer[]" />
        <form-property name="nonAffiliatedTeachersIds" type="java.lang.Integer[]" />                
        <form-property name="responsibleTeachersIds" type="java.lang.Integer[]" />
		<form-property name="number" type="java.lang.String" />
		<form-property name="page" type="java.lang.Integer" initial="0"/> 	    	
      </form-bean> 
    
    </form-beans>

    <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
        <exception
			type="java.lang.Exception"
			key="error.Exception"
            handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
			/>
		<exception
			type="net.sourceforge.fenixedu.applicationTier.Servico.exceptions.NotAuthorizedException"
			key="error.NotAuthorized"
			handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
			/>
	</global-exceptions>

	<!-- ========== Global Forward Definitions =============================== -->
	<global-forwards type="org.apache.struts.action.ActionForward">
     <forward name="index" path="/index.do" redirect="true"/>
     <forward name="firstPage" path="/switchAction.do?prefix=&amp;page=/loginPage.jsp"/>  
   	 <forward name="logoff" path="/logoff.do" contextRelative="true"/>
   	 <forward name="redirect" path="/redirect.do" contextRelative="true"/>
    </global-forwards>

	<!-- ========== Action Mapping Definitions =============================== -->
	<action-mappings type="org.apache.struts.action.ActionMapping">
   
   <action path="/index" 
      		  type="net.sourceforge.fenixedu.presentationTier.Action.base.FenixForwardAction" 
      		  forward="/firstPage.jsp"/>
      		  
    <action path="/curricularCourseManagement" 
      		  type="net.sourceforge.fenixedu.presentationTier.Action.base.FenixForwardAction" 
      		  forward="/curricularCourseManagement.jsp"/>  		  
      		  
    <action path="/curricularCourseManager"
    		type="net.sourceforge.fenixedu.presentationTier.Action.scientificCouncil.CurricularCourseManagerDA" 
    		parameter="method"
    		scope="request"
    		
    		>
    		<forward name="selectDegree" path="selectDegree.jsp"/>
    		<forward name="showDegreeCurricularPlans" path="showDegreeCurricularPlans.jsp"/>
    		<forward name="showCurricularCourses" path="showCurricularCourses.jsp"/>
    		<forward name="viewCurriculum" path="viewCurriculum.jsp"/>
    		<forward name="editCurriculum" path="editCurriculum.jsp"/>
    		
    		</action>	 
    		
     <action path="/curriculumManager"
     		name="curriculumForm"
    		type="net.sourceforge.fenixedu.presentationTier.Action.scientificCouncil.CurricularCourseManagerDA" 
    		parameter="method"
    		scope="request"
    		
    		>
    		<forward name="editCurriculum" path="editCurriculum.jsp"/>
    		<forward name="insertCurriculum" path="insertCurriculum.jsp"/>
    		<forward name="showCurricularCourses" path="showCurricularCourses.jsp"/>
    		
    		</action>	 		 
	<action path="/basicCurricularCourseManager"
			name="selectBasicCurricularCourses"
    		type="net.sourceforge.fenixedu.presentationTier.Action.scientificCouncil.CurricularCourseManagerDA" 
    		parameter="method"
    		scope="request"
    		
    		>
    		<forward name="selectDegree" path="selectDegreeBasic.jsp"/>
    		<forward name="showDegreeCurricularPlans" path="showDegreeCurricularPlansBasic.jsp"/>
    		<forward name="showCurricularCourses" path="showCurricularCoursesBasic.jsp"/>
    		<forward name="firstPage" path="curricularCourseManagement.do"/>
    		
    		</action>
    		
		<action path="/creditsReport"
     		name="creditsReportForm"
    		type="net.sourceforge.fenixedu.presentationTier.Action.scientificCouncil.credits.ViewTeacherCreditsReportDispatchAction" 
    		parameter="method"
    		scope="request"    		
    		>
    		<exception type="net.sourceforge.fenixedu.presentationTier.Action.scientificCouncil.credits.ViewTeacherCreditsReportDispatchAction$InvalidPeriodException"
				key="error.credits.chooseExecutionPeriods" 
                path="/creditsReport.do?method=prepare"
            />  
    		<forward name="prepare" path="select-report-parameters"/>
    		<forward name="showCreditsReport" path="show-credits-report"/>
    	</action>  
    	<action path="/masterDegreeCreditsManagement"
     		name="masterDegreeCreditsForm"
    		type="net.sourceforge.fenixedu.presentationTier.Action.scientificCouncil.credits.MasterDegreeCreditsManagementDispatchAction" 
    		parameter="method"
    		scope="request"    		
    		>
    		<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" 
                key="" 
                handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/>  
    		<exception type="java.lang.NumberFormatException"
				key="error.credits.invalidNumber" 
                path="/masterDegreeCreditsManagement.do?method=prepareEdit"
            />   		
    		<forward name="chooseMasterDegreeExecution" path="select-masterDegree-parameters"/>
    		<forward name="showCreditsReport" path="show-credits-report"/>
    		<forward name="editMasterDegreeCredits" path="edit-masterDegree-credits"/>
    		<forward name="successfulEdit" path="/masterDegreeCreditsManagement.do?method=viewMasterDegreeCredits"/>
    	</action>  
    	
		<!--Action for reading teachers of an execution course  -->
		<action
		    path="/readTeacherInCharge"
		    name="masterDegreeCreditsForm"
		    input="/readCurricularCourse.do"
			scope="request"
			type="net.sourceforge.fenixedu.presentationTier.Action.manager.ReadTeacherInChargeAction">         
	       <forward name="readExecutionCourseTeachers" path="df.page.read-execution-course-teachers"/>      	      
		</action>
		
		<!--Actions for inserting teachers at an execution course  -->
		<action
		    path="/insertProfessorShipByNumber"
		    name="masterDegreeCreditsForm"
		    input="/insertProfessorShipByNumber.do?method=prepareInsert&amp;page=0"
			scope="request"
			parameter="method"
			type="net.sourceforge.fenixedu.presentationTier.Action.manager.InsertProfessorShipByNumberDA"
	        validate="true">
	        <exception type="net.sourceforge.fenixedu.presentationTier.Action.exceptions.NonExistingActionException"
	         	       key="ServidorApresentacao.Action.exceptions.NonExistingActionException"
	                   handler="net.sourceforge.fenixedu.presentationTier.config.FenixErrorExceptionHandler"/>   
	       <forward name="insertProfessorShip" path="df.page.insert-professorShip-by-number"/>
	       <forward name="readTeacherInCharge" path="/readTeacherInCharge.do"/>      	      
		</action>
		
		<!-- Action for saving modifications at teachers body --> 
	    <action 
	      	path="/saveTeachersBody"
	      	name="masterDegreeCreditsForm"
	      	input="/readTeacherInCharge.do"
	      	scope="request"
	      	type="net.sourceforge.fenixedu.presentationTier.Action.manager.SaveTeachersBodyAction">
	      	<exception type="net.sourceforge.fenixedu.presentationTier.Action.exceptions.InvalidArgumentsActionException"
	         	       key="ServidorApresentacao.Action.exceptions.InvalidArgumentsActionException"
	                   handler="net.sourceforge.fenixedu.presentationTier.config.FenixErrorExceptionHandler"/>
	       <forward name="readCurricularCourse" path="/masterDegreeCreditsManagement.do?method=prepareEdit"/>      	      
	    </action>
	    	    
	</action-mappings>

	<!-- ========== Controller Configuration ================================ -->
	<controller processorClass="net.sourceforge.fenixedu.presentationTier.processor.FenixRequestProcessorWithTiles"/>

	<!-- ========== Message Resources Definitions ============================ -->
    <message-resources parameter="ServidorApresentacao.ScientificCouncilResources" null="false"/>
    <message-resources parameter="ServidorApresentacao.EnumerationResources" key="ENUMERATION_RESOURCES" null="false"/>	

	<!-- ========== Plug Ins Configuration ================================= -->
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" 
		value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-scientificCouncil.xml"/>
	</plug-in>

	<plug-in className="org.apache.struts.tiles.TilesPlugin" >
		<set-property property="definitions-config"
					  value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/scientificCouncil/tiles-scientificCouncil-definitions.xml,/WEB-INF/tiles/scientificCouncil/tiles-scientificCouncil-pages-definitions.xml" />					  
		<set-property property="moduleAware" value="true" />
		<set-property property="definitions-parser-validate" value="true" />
	</plug-in>    

</struts-config>
