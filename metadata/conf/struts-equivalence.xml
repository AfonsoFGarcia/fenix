<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>

	<!-- ========== Data Source Configuration =============================== -->
	<data-sources/>

	<!-- ========== Form Bean Definitions =================================== -->
	<form-beans type="org.apache.struts.action.ActionFormBean">
		<form-bean name="manualEquivalenceFrom" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
			<form-property name="method" type="java.lang.String"/>
			<form-property name="studentOID" type="java.lang.Integer"/>
			<form-property name="grades" type="java.lang.String[]"/>
			<form-property name="curricularCoursesToGiveEquivalence" type="java.lang.Integer[]"/>
			<form-property name="curricularCoursesToGetEquivalence" type="java.lang.Integer[]"/>
		</form-bean>
	</form-beans>

	<!-- ========== Global Exception Definitions ============================ -->
	 <global-exceptions>
		<exception type="java.lang.Exception"
			       key="java.lang.Exception"
			       path="/naoExecutado.do"
			       handler="ServidorApresentacao.config.FenixExceptionHandler"/>
		<exception type="ServidorAplicacao.NotAuthorizedException"
			       key="ServidorAplicacao.NotAuthorizedException"
			       path="/naoAutorizado.do"/>
		<exception type="ServidorAplicacao.FenixServiceException"
		  	       key="ServidorAplicacao.FenixServiceException"
		  	       path="/naoExecutado.do"
		  	       handler="ServidorApresentacao.config.FenixExceptionHandler"/>
		<exception type="ServidorAplicacao.Servico.ExcepcaoInexistente"
			       key="ServidorAplicacao.Servico.ExcepcaoInexistente"
			       path="/naoExistente.do"
			       handler="ServidorApresentacao.config.FenixExceptionHandler"/>
		 <exception type="ServidorApresentacao.Action.exceptions.NonExistingActionException"
			       key="ServidorApresentacao.Action.exceptions.NonExistingActionException"
			       path="/nonExistingError.jsp"
			       handler="ServidorApresentacao.config.FenixExceptionHandler"/>
    </global-exceptions>

	<!-- ========== Global Forward Definitions ============================== -->
	<global-forwards type="org.apache.struts.action.ActionForward">
		<forward name="enrolment" path="/degreeAdministrativeOffice/globalEnrolment.do" contextRelative="true"/>
		<forward name="equivalenceForDegreeAdministrativeOffice" path="/degreeAdministrativeOffice/functionRedirect.do?method=chooseStudentAndDegreeTypeForManualEquivalence" contextRelative="true"/>

		<forward name="candidateSection" path="/coordinator/candidateSection.do" contextRelative="true"/>
		<forward name="studentSection" path="/coordinator/studentSection.do" contextRelative="true"/>
		<forward name="equivalenceForCoordinator" path="/coordinator/equivalence.do?method=begin" contextRelative="true"/>

		<forward name="ciaplIndex" path="/index.do" contextRelative="true"/>
		<forward name="logoff" path="/logoff.do" contextRelative="true"/>
		<forward name="index" path="/index.do" redirect="true"/>
	</global-forwards>

	<!-- ========== Action Mapping Definitions ============================== -->
	<action-mappings type="org.apache.struts.action.ActionMapping">
		<!-- page fronting actions -->
		<action path="/home" forward="/switchAction.do?prefix=&amp;page=/mainPortalPage.jsp"/>
		<action path="/switchAction" type="org.apache.struts.actions.SwitchAction"/>

		<action path="/index" type="ServidorApresentacao.Action.commons.VoidAction">
			<forward name="Success" path="df.page.main"/>
		</action>

		<action	name="manualEquivalenceFrom"
				type="ServidorApresentacao.Action.equivalence.ManualEquivalenceManagerDispatchAction"
				path="/manualEquivalenceManagerForDegreeAdministrativeOffice"
				parameter="method"
				scope="session"
				validate="false">
			<exception	type="ServidorApresentacao.Action.exceptions.FenixTransactionException"
						key="ServidorApresentacao.Action.exceptions.InvalidSituationActionException"
						handler="ServidorApresentacao.config.FenixTransactionExceptionHandler"/>
			<forward name="beginTransaction" path="/manualEquivalenceManagerForDegreeAdministrativeOffice.do?method=show"/>
			<forward name="showCurricularCoursesForEquivalence" path="df.page.showCurricularCoursesForDegreeAdministrativeOfficeEquivalence"/>
			<forward name="verifyCurricularCoursesForEquivalence" path="df.page.verifyCurricularCoursesForDegreeAdministrativeOfficeEquivalence"/>
			<forward name="acceptCurricularCoursesForEquivalence" path="df.page.acceptCurricularCoursesForDegreeAdministrativeOfficeEquivalence"/>
			<forward name="begin" path="/manualEquivalenceManagerForDegreeAdministrativeOffice.do?method=show"/>
		</action>

		<action	name="manualEquivalenceFrom"
				type="ServidorApresentacao.Action.equivalence.ManualEquivalenceManagerDispatchAction"
				path="/manualEquivalenceManagerForCoordinator"
				parameter="method"
				scope="session"
				validate="false">
			<exception	type="ServidorApresentacao.Action.exceptions.FenixTransactionException"
						key="ServidorApresentacao.Action.exceptions.InvalidSituationActionException"
						handler="ServidorApresentacao.config.FenixTransactionExceptionHandler"/>
			<forward name="beginTransaction" path="/manualEquivalenceManagerForCoordinator.do?method=show"/>
			<forward name="showCurricularCoursesForEquivalence" path="df.page.showCurricularCoursesForCoordinatorEquivalence"/>
			<forward name="verifyCurricularCoursesForEquivalence" path="df.page.verifyCurricularCoursesForCoordinatorEquivalence"/>
			<forward name="acceptCurricularCoursesForEquivalence" path="df.page.acceptCurricularCoursesForCoordinatorEquivalence"/>
			<forward name="begin" path="/manualEquivalenceManagerForCoordinator.do?method=show"/>
		</action>
	</action-mappings>

	<!-- ========== Controller Configuration ================================ -->
	<controller processorClass="ServidorApresentacao.processor.FenixRequestProcessorWithTiles"/>

	<!-- ========== Message Resources Definitions =========================== -->
	<message-resources parameter="ServidorApresentacao.EquivalenceResources"/>

	<!-- ========== Plug Ins Configuration ================================== -->
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
		<!--<set-property property="pathnames" value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-degreeAdministrativeOffice.xml"/>-->
	</plug-in>

	<plug-in className="org.apache.struts.tiles.TilesPlugin">
		<set-property property="definitions-config" value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/equivalence/tiles-equivalence-definitions.xml,/WEB-INF/tiles/equivalence/tiles-equivalence-pages-definitions.xml"/>
		<set-property property="moduleAware" value="true"/>
		<set-property property="definitions-parser-validate" value="true"/>
	</plug-in>

</struts-config>