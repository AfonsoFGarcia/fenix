<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
      "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
      "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
    
    <!-- ========== Data Source Configuration =============================== -->
    <data-sources />
    
    <!-- ========== Form Bean Definitions ================================== -->
    <form-beans type="org.apache.struts.action.ActionFormBean">
      

      <!-- Dynamic-FormBean for Password Change -->
      <form-bean name="createCandidateForm" 
                 type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
                 dynamic="true">
        <form-property name="page" type="java.lang.Integer" />
        <form-property name="specialization" type="java.lang.String" />
        <form-property name="degree" type="java.lang.String" />
        <form-property name="name" type="java.lang.String" />
        <form-property name="identificationDocumentNumber" type="java.lang.String" />
        <form-property name="identificationDocumentType" type="java.lang.String" />
      </form-bean>

      <form-bean name="listCandidatesForm" 
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
        <form-property name="degree" type="java.lang.String" />
        <form-property name="specialization" type="java.lang.String" />
        <form-property name="candidateSituation" type="java.lang.String" />
        <form-property name="candidateNumber" type="java.lang.String" />
      </form-bean>
      
      <!-- Bean for The Creation of a Contributor -->
      <form-bean name="createContributorForm" 
                 type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
                 dynamic="true">

            <form-property name="page" type="java.lang.Integer" />
        	<form-property name="contributorNumber" type="java.lang.String" />
        	<form-property name="contributorName" type="java.lang.String" />
        	<form-property name="contributorAddress" type="java.lang.String" />
      </form-bean>


      <!-- Bean for The Choosing of a Contributor -->
      <form-bean name="chooseContributorForm" 
                 type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
                 dynamic="true">

            <form-property name="page" type="java.lang.Integer" />
        	<form-property name="contributorNumber" type="java.lang.String" />
      </form-bean>


		<!-- Bean for The Creation of a Guide -->
	    <form-bean name="createGuideForm" 
     			type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
			    dynamic="true">

            <form-property name="page" type="java.lang.Integer" />
        	<form-property name="degree" type="java.lang.String" />
        	<form-property name="number" type="java.lang.String" />
        	<form-property name="requester" type="java.lang.String" />
        	<form-property name="graduationType" type="java.lang.String" />
        	<form-property name="contributorNumber" type="java.lang.String" />
        	<form-property name="contributorName" type="java.lang.String" />
        	<form-property name="contributorAddress" type="java.lang.String" />
        	<form-property name="contributorList" type="java.lang.String" />
      </form-bean>

	  <!-- Bean for ready to create a guide  -->
      <form-bean name="guideCreateReady" 
                 type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
                 dynamic="true">

        	<form-property name="othersRemarks" type="java.lang.String" />
        	<form-property name="othersPrice" type="java.lang.String" />
        	<form-property name="remarks" type="java.lang.String" />
        	<form-property name="guideSituation" type="java.lang.String" />
        	<form-property name="paymentType" type="java.lang.Integer" initial="1" />
        	
      </form-bean>


      <form-bean name="errorMailForm" 
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
        <form-property name="email" type="java.lang.String" />
        <form-property name="subject" type="java.lang.String" />
        <form-property name="body" type="java.lang.String" />
      </form-bean>

    </form-beans>
    
    <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
		<exception type="java.lang.Exception"
			       key="java.lang.Exception"
			       path="/naoExecutado.do"
			       handler="ServidorApresentacao.config.FenixExceptionHandler"/>
		<exception type="ServidorAplicacao.NotAuthorizedException"
			       key="ServidorAplicacao.NotAuthorizedException"
			       path="/naoAutorizado.do"
			       />
		<exception type="ServidorAplicacao.FenixServiceException"
		  	       key="ServidorAplicacao.FenixServiceException"
		  	       path="/naoExecutado.do"
		  	       handler="ServidorApresentacao.config.FenixExceptionHandler" />
	</global-exceptions>
    
    <!-- ========== Global Forward Definitions =============================== -->
    <global-forwards type="org.apache.struts.action.ActionForward">
	  <forward name="index" path="index.do" redirect="true"/>
      <forward name="firstPage" path="/index.do"/>
    </global-forwards>
    
    <!-- ========== Action Mapping Definitions =============================== -->
    <action-mappings type="org.apache.struts.action.ActionMapping">
      <!-- page fronting actions -->
      <action path="/home" forward="/switchAction.do?prefix=&amp;page=/mainPortalPage.jsp"/>
      <action path="/switchAction" type="org.apache.struts.actions.SwitchAction" />
      <action path="/index" forward="/index.jsp"/>
      <action path="/candidateSection" forward="/candidateIndex.jsp"/>
      <action path="/contributorSection" forward="/contributor/index.jsp"/>
      <action path="/guideSection" forward="/guide/indexGuide.jsp"/>
      
      
            
      <action path="/naoExecutado" forward="/error.jsp"/>
      
      <!-- action definition -->
      
      <!-- action to create a candidate -->
      <action attribute="createCandidateForm"
      		  input="/createCandidate.jsp"
      	      name="createCandidateForm"
		      path="/createCandidateDispatchAction"
		      parameter="method"
              type="ServidorApresentacao.Action.masterDegree.administrativeOffice.CreateCandidateDispatchAction"
              validate="true">
     		 <exception type="ServidorApresentacao.Action.exceptions.ExistingActionException"
		                key="ServidorApresentacao.Action.exceptions.ExistingActionException"
                        handler="ServidorApresentacao.config.FenixErrorExceptionHandler"/>
	         <forward name="PrepareSuccess" path="/createCandidate.jsp"/>  
	         <forward name="CreateSuccess" path="/createCandidateSuccess.jsp"/>  
      </action>

      <!-- action to visualize candidates -->
      <action attribute="listCandidatesForm"
      		  input="/chooseCandidateList.jsp"
      	      name="listCandidatesForm"
		      path="/visualizeCandidates"
		      parameter="method"
              type="ServidorApresentacao.Action.masterDegree.administrativeOffice.ListCandidatesDispatchAction"
              validate="true">
	         <forward name="PrepareReady" path="/chooseCandidateList.jsp"/>  
	         <forward name="ActionReady" path="/visualizeCandidate.jsp"/>  
	         <forward name="ChooseCandidate" path="/candidateList.jsp"/>  
      </action>

      <!-- action to edit candidates -->
      <action attribute="listCandidatesForm"
      		  input="/chooseCandidateList.jsp"
      	      name="listCandidatesForm"
		      path="/editCandidates"
		      parameter="method"
              type="ServidorApresentacao.Action.masterDegree.administrativeOffice.ListCandidatesDispatchAction"
              validate="true">
     		 <exception type="ServidorApresentacao.Action.exceptions.ExistingActionException"
		                key="ServidorApresentacao.Action.exceptions.ExistingActionException"
                        handler="ServidorApresentacao.config.FenixErrorExceptionHandler"/>
	         <forward name="PrepareReady" path="/chooseCandidateList.jsp"/>  
	         <forward name="ActionReady" path="/editCandidates.do?method=prepareEdit"/>  
	         <forward name="ChooseCandidate" path="/candidateList.jsp"/>  
      </action>
      
      <!-- Action For LogOff -->
      <action path="/logoff" forward="/switchAction.do?prefix=&amp;page=/logoff.do"/>
      
      	<!-- ExceptionHandling -->   
      <action parameter="method"
              name="errorMailForm" 
              path="/exceptionHandling"
              scope="request"
              type="ServidorApresentacao.Action.ExceptionHandlingAction"     
              >
      </action>




      <!-- Dispatch Action to Create the Contributor Information -->
      <action path="/createContributorDispatchAction"
	     attribute="createContributorForm"
	          name="createContributorForm"
	         input="/contributor/createContributor.jsp"
	      validate="true"
		 parameter="method"
      	      type="ServidorApresentacao.Action.masterDegree.administrativeOffice.CreateContributorDispatchAction">
   		 <exception type="ServidorApresentacao.Action.exceptions.ExistingActionException"
            key="ServidorApresentacao.Action.exceptions.ExistingActionException"
            handler="ServidorApresentacao.config.FenixErrorExceptionHandler"/>
      	  <forward name="CreateSuccess" path="/contributor/createContributorSuccess.jsp"/>
      	  <forward name="PrepareReady" path="/contributor/createContributor.jsp"/>
      </action>

      <!-- action to prepare a creation of a guide -->

      <!-- action to visualize Contributors -->
      <action attribute="chooseContributorForm"
      		  input="/contributor/chooseContributor.jsp"
      	      name="chooseContributorForm"
		      path="/visualizeContributors"
		      parameter="method"
		      scope="request"
              type="ServidorApresentacao.Action.masterDegree.administrativeOffice.contributor.ListContributorsDispatchAction"
              validate="true">
	         <forward name="PrepareReady" path="/contributor/chooseContributor.jsp"/>  
	         <forward name="ActionReady" path="contributor/visualizeContributor.jsp"/>  
	         <forward name="ChooseContributor" path="/contributor/selectContributorFromList.jsp"/>  
      </action>

      <!-- action to edit Contributors -->
      <action attribute="chooseContributorForm"
      		  input="/contributor/chooseContributor.jsp"
      	      name="chooseContributorForm"
		      path="/editContributors"
		      parameter="method"
		      scope="request"
              type="ServidorApresentacao.Action.masterDegree.administrativeOffice.contributor.ListContributorsDispatchAction"
              validate="true">
     		 <exception type="ServidorApresentacao.Action.exceptions.ExistingActionException"
		                key="ServidorApresentacao.Action.exceptions.ExistingActionException"
                        handler="ServidorApresentacao.config.FenixErrorExceptionHandler"/>
	         <forward name="PrepareReady" path="/contributor/chooseContributor.jsp"/>  
	         <forward name="ActionReady" path="/editContributor.do?method=prepareEdit" />  
	         <forward name="ChooseContributor" path="/contributor/selectContributorFromList.jsp"/>  
      </action>

	  <!-- Action to Edit ONE contributor -->
      <action attribute="createContributorForm"
      		  input="/contributor/editContributor.jsp"
      	      name="createContributorForm"
		      path="/editContributor"
		      parameter="method"
              type="ServidorApresentacao.Action.masterDegree.administrativeOffice.contributor.ListContributorsDispatchAction"
              validate="true">
     		 <exception type="ServidorApresentacao.Action.exceptions.ExistingActionException"
		                key="ServidorApresentacao.Action.exceptions.ExistingActionException"
                        handler="ServidorApresentacao.config.FenixErrorExceptionHandler"/>
	         <forward name="EditReady" path="/contributor/editContributor.jsp"/>  
	         <forward name="EditSuccess" path="/contributor/editContributorSuccess.jsp"/>  
      </action>
      
      
      

      <!-- action to create a guide -->
      <action attribute="createGuideForm"
      		  input="/guide/createGuide.jsp"
      	      name="createGuideForm"
		      path="/createGuideDispatchAction"
		      parameter="method"
              type="ServidorApresentacao.Action.masterDegree.administrativeOffice.CreateGuideDispatchAction"
              validate="true">
	         <forward name="PrepareSuccess" path="/guide/createGuide.jsp"/> 
	         <forward name="CreateCandidateGuide" path="/guide/createGuideReady.jsp"/>  
      </action>


      <!-- Create Guide -->
      <action attribute="guideCreateReady"
      		  input="/guide/createGuideReady.jsp"
      	      name="guideCreateReady"
		      path="/createGuideReadyDispatchAction"
		      parameter="method"
              type="ServidorApresentacao.Action.masterDegree.administrativeOffice.CreateGuideDispatchAction"
              validate="true">
	         <forward name="PrepareSuccess" path="/guide/createGuide.jsp"/> 
	         <forward name="CreateCandidateGuide" path="/guide/createGuideReady.jsp"/>  
      </action>


    </action-mappings>
    
    <!-- ========== Controller Configuration ================================ -->
    <controller processorClass="ServidorApresentacao.processor.FenixRequestProcessor"/>
    
    <!-- ========== Message Resources Definitions ============================ -->
    <message-resources parameter="ServidorApresentacao.ApplicationResources" />

    <!-- ========== Plug Ins Configuration ================================= -->
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" 
                    value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-masterDegreeAdministrativeOffice.xml"/>
    </plug-in>
    
</struts-config>

