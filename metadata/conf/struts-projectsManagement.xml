<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC       
	  "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
      "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>

	<data-sources/>

  <!-- ========== Form Bean Definitions =================================== -->
	<form-beans type="org.apache.struts.action.ActionFormBean">
		<form-bean name="rubricForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
	    	<form-property name="rubric" type="java.lang.String" />
	    	<form-property name="reportType" type="java.lang.String" />
	    	<form-property name="projectCode" type="java.lang.String" />
	    </form-bean>
	    <form-bean name="accessForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
	    	<form-property name="username" type="java.lang.String" />
	    	<form-property name="personCode" type="java.lang.Integer" />
	    	<form-property name="projectCode" type="java.lang.Integer" />
	    	<form-property name="projectCodes" type="java.lang.String" />
	    	<form-property name="beginDay" type="java.lang.String" />
	    	<form-property name="beginMonth" type="java.lang.String" />
	    	<form-property name="beginYear" type="java.lang.String" />
	    	<form-property name="endDay" type="java.lang.String" />
	    	<form-property name="endMonth" type="java.lang.String" />
	    	<form-property name="endYear" type="java.lang.String" />
	    	<form-property name="method" type="java.lang.String" />
	    	<form-property name="page" type="java.lang.Integer" initial="0"/>
	    </form-bean>
    </form-beans>

    <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
        <exception
			type="java.lang.Exception"
			key="error.Exception"
            handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
			/>
		<exception
			type="net.sourceforge.fenixedu.applicationTier.Servico.exceptions.NotAuthorizedException"
			key="error.NotAuthorized"
			handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
			/>
	</global-exceptions>

  <!-- ========== Global Forward Definitions ============================== -->
  <global-forwards type="org.apache.struts.action.ActionForward">
    <forward name="logoff" path="/logoff.do" contextRelative="true"/>
    <forward name="redirect" path="/redirect.do" contextRelative="true"/>
    <forward name="index" path="/index.do" />
    <forward name="institucionalProjectIndex" path="/institucionalProjectIndex.do" />
  </global-forwards>

  <!-- ========== Action Mapping Definitions ============================== -->
  <action-mappings type="org.apache.struts.action.ActionMapping">
	<action path="/index" type="net.sourceforge.fenixedu.presentationTier.Action.projectsManagement.IndexAction">
    	<forward name="success" path="df.page.projectManager"/>
    </action>
    <action path="/institucionalProjectIndex" type="net.sourceforge.fenixedu.presentationTier.Action.projectsManagement.InstitucionalProjectManagerIndexAction">
    	<forward name="success" path="df.page.institucionaProjectManager"/>
    </action>
    <action path="/switchAction" type="org.apache.struts.actions.SwitchAction"/>
    <action path="/projectReport" type="net.sourceforge.fenixedu.presentationTier.Action.projectsManagement.ProjectReportsDispatchAction" 
        parameter="method" scope="request"  validate="true" name="rubricForm" >
        <forward name="index" path="df.page.projectManager"/>
        <forward name="projectList" path="project-List"/>
		<forward name="coordinatorsList" path="coordinators-List"/>
		<forward name="showsummaryReport" path="show-Summary-Report"/>
		<forward name="showexpensesReport" path="show-Expenses-Report"/>
		<forward name="showrevenueReport" path="show-Revenue-Report"/>
		<forward name="showcabimentosReport" path="show-Movements-Report"/>
		<forward name="showadiantamentosReport" path="show-Movements-Report"/>
		<forward name="showcompleteExpensesReport" path="show-Complete-Expenses-Report"/>
		<forward name="showopeningProjectFileReport" path="show-Opening-Project-File-Report"/>
		<forward name="showprojectBudgetaryBalanceReport" path="show-Project-Budgetary-Balance-Report"/>
		<forward name="helpPage" path="help-Page"/>
    </action>
    <action path="/overheadReport" type="net.sourceforge.fenixedu.presentationTier.Action.projectsManagement.OverheadReportsDispatchAction" 
        parameter="method" scope="request"  validate="true" name="rubricForm" >
        <forward name="index" path="df.page.projectManager"/>
		<forward name="showgeneratedOverheadsReport" path="show-Generated-Overheads-Report"/>
		<forward name="showtransferedOverheadsReport" path="show-Transfered-Overheads-Report"/>
		<forward name="showoverheadsSummaryReport" path="show-Overheads-Summary-Report"/>
		<forward name="helpPage" path="help-Page"/>
    </action>
    
    <action path="/projectAccess" name="accessForm"
	    input="/projectAccess.do?method=showPersonAccesses&amp;page=0" scope="request"
        parameter="method" type="net.sourceforge.fenixedu.presentationTier.Action.projectsManagement.ProjectAccessDelegationDispatchAction"
        validate="true" >
   		<forward name="choosePerson" path="choose-Person"/>
   		<forward name="showPersonAccesses" path="show-Person-Accesses"/>
   		<forward name="editProjectAccess" path="edit-Project-Access"/>   		
   		<forward name="showProjectsAccesses" path="show-Projects-Accesses"/>
   		
    </action>
    <action path="/projectAccessEdition" name="accessForm"
	    input="/projectAccess.do?method=prepareEditProjectAccess&amp;page=0" scope="request"
        parameter="method" type="net.sourceforge.fenixedu.presentationTier.Action.projectsManagement.ProjectAccessDelegationDispatchAction"
        validate="true" >
        <forward name="showPersonAccesses" path="show-Person-Accesses"/>
   		<forward name="editProjectAccess" path="edit-Project-Access"/>
    </action>
  </action-mappings>
  
  <!-- ========== Controller Configuration ================================ -->
    <controller processorClass="net.sourceforge.fenixedu.presentationTier.processor.FenixRequestProcessorWithTiles"/>
    <!-- ========== Message Resources Definitions ============================ -->
    <message-resources parameter="resources.ProjectsManagementResources" null="false"/>
	<message-resources parameter="resources.GlobalResources" key="GLOBAL_RESOURCES" null="false"/>
    <!-- ========== Plug Ins Configuration ================================= -->
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
        <set-property property="pathnames" 
            value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-projectsManagement.xml" /> 
    </plug-in>
    <plug-in className="org.apache.struts.tiles.TilesPlugin" >
        <set-property property="definitions-config" 
            value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/projectsManagement/tiles-projectsManagement-definitions.xml,/WEB-INF/tiles/projectsManagement/tiles-projectsManagement-pages-definitions.xml" 
            />
        <set-property property="moduleAware" value="true" />
        <set-property property="definitions-parser-validate" value="true" />
    </plug-in>
</struts-config>