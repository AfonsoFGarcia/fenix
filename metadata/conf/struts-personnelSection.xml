<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC       
	  "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
      "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
    <!-- ========== Data Source Configuration =============================== -->
    <data-sources />

	<!-- ========== Form Bean Definitions ================================== -->
	<form-beans type="org.apache.struts.action.ActionFormBean">
		<form-bean name="employeeForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
	    	<form-property name="employeeNumber" type="java.lang.String" />
	    	<form-property name="method" type="java.lang.String" />
	    	<form-property name="action" type="java.lang.String" />
	    	<form-property name="page" type="java.lang.Integer"/>
	    	<form-property name="employeeID" type="java.lang.String"/>
	    	<form-property name="workScheduleID" type="java.lang.String"/>
	    	<form-property name="addWorkWeek" type="java.lang.String" />	    	
	    	<form-property name="workWeek" type="java.lang.String" />
	    	<form-property name="year" type="java.lang.String" />
	    	<form-property name="month" type="java.lang.String" />
	    </form-bean>
	    <form-bean name="extraWorkAuthorizationForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
	    	<form-property name="method" type="java.lang.String" />
	    	<form-property name="addEmployee" type="java.lang.String" />
	    </form-bean>
   	    <form-bean name="parametrizationForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
	    	<form-property name="method" type="java.lang.String" />
	    	<form-property name="rowIndex" type="java.lang.String" />
	    </form-bean>
	     <form-bean name="extraWorkForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
	    	<form-property name="action" type="java.lang.String" />
	    </form-bean>
	</form-beans>
	
	<!-- ========== Global Forward Definitions =============================== -->
	<global-forwards type="org.apache.struts.action.ActionForward"/>      
	<!-- ========== Action Mapping Definitions =============================== -->      		  
	<action-mappings type="org.apache.struts.action.ActionMapping">
		<action path="/index" 
	      		  type="net.sourceforge.fenixedu.presentationTier.Action.base.FenixForwardAction" 
	      		  forward="managementAssiduousnessWelcome"/>
	    <action path="/viewEmployeeAssiduousness" name="employeeForm"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.ViewEmployeeAssiduousnessDispatchAction" 
				parameter="method"
				scope="request"
				validate="true"
				input="/viewEmployeeAssiduousness.do?method=chooseEmployee&amp;page=0">
			<forward name="index" path="managementAssiduousnessWelcome"/>
			<forward name="choose-employee" path="choose-employee"/>
			<forward name="show-employee-work-sheet" path="show-employee-work-sheet"/>
			<forward name="show-schedule" path="show-schedule"/>
			<forward name="show-clockings" path="show-clockings"/>
			<forward name="show-justifications" path="show-justifications"/>
			<forward name="show-vacations" path="show-vacations"/>
			<forward name="show-status" path="show-status"/>
			<forward name="show-all-schedules" path="show-all-schedules"/>
			<forward name="show-balance-resume" path="show-balance-resume"/>
		</action>
		<action path="/exportAssiduousness"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.ExportAssiduousnessDispatchAction" 
				parameter="method"
				scope="request"
				validate="true">
				<forward name="choose-year-month" path="choose-year-month"/>
		</action>
		<action path="/assiduousnessParametrization"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.AssiduousnessParametrizationDispatchAction" 
				parameter="method"
				scope="request"
				validate="true"
				name="parametrizationForm">
				<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key="error.justificationMotiveAcronymAlreadyExists" 
				handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/> 
				<forward name="edit-justification-motive" path="edit-justification-motive"/>
				<forward name="edit-regularization-motive" path="edit-regularization-motive"/>
				<forward name="insert-schedule" path="insert-schedule"/>
				<forward name="show-all-schedules" path="show-all-schedules"/>
				<forward name="show-justification-motives" path="show-justification-motives"/>
				<forward name="show-regularization-motives" path="show-regularization-motives"/>
				<forward name="show-assiduousness-exemptions" path="show-assiduousness-exemptions"/>
				<forward name="edit-assiduousness-exemption" path="edit-assiduousness-exemption"/>
		</action>
		<action path="/employeeAssiduousness" name="employeeForm"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.EmployeeAssiduousnessDispatchAction" 
				parameter="method"
				scope="request"
				validate="true"
				input="/employeeAssiduousness.do?method=prepareAssociateEmployeeWorkSchedule">
				<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key="" 
					handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/> 
			<forward name="show-employee-work-sheet" path="show-employee-work-sheet"/>
			<forward name="show-justifications" path="show-justifications"/>
			<forward name="prepare-associate-schedule" path="prepare-associate-schedule"/>
			<forward name="associate-schedule" path="associate-schedule"/>
			<forward name="show-clockings" path="show-clockings"/>
			<forward name="create-missing-clocking-month" path="create-missing-clocking-month"/>
			<forward name="insert-justification" path="insert-justification"/>
			<forward name="associate-exception-schedule" path="associate-exception-schedule"/>
			<forward name="show-schedule" path="show-schedule"/>
			<forward name="edit-status" path="edit-status"/>
			<forward name="show-status" path="show-status"/>
		</action>
		<action path="/employeeExceptionSchedule" name="employeeForm"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.EmployeeAssiduousnessDispatchAction" 
				parameter="method"
				scope="request"
				validate="true"
				input="/employeeExceptionSchedule.do?method=prepareAssociateExceptionWorkSchedule">
				<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key="" 
					handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/> 
			<forward name="associate-exception-schedule" path="associate-exception-schedule"/>
			<forward name="show-schedule" path="show-schedule"/>			
		</action>	
		
		<action path="/createExtraWorkAuthorization"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.AssiduousnessExtraWorkDispatchAction" 
				parameter="method"
				scope="request"
				name="extraWorkAuthorizationForm"
				input="/createExtraWorkAuthorization.do?method=prepareCreateExtraWorkAuthorization">
				<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key="" 
					handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/> 
			<forward name="create-extra-work-authorization" path="create-extra-work-authorization"/>
			<forward name="show-extra-work-authorization" path="show-extra-work-authorization"/>
			<forward name="view-extra-work-authorization" path="view-extra-work-authorization"/>
		</action>
		
		<action path="/manageExtraWorkAuthorization"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.AssiduousnessExtraWorkDispatchAction" 
				parameter="method"
				scope="request"
				name="extraWorkAuthorizationForm"
				input="/manageExtraWorkAuthorization.do?method=prepareEditExtraWorkAuthorization">
				<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key="" 
					handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/> 				
			<forward name="edit-extra-work-authorization" path="edit-extra-work-authorization"/>
			<forward name="show-extra-work-authorizations" path="show-extra-work-authorizations"/>
			<forward name="view-extra-work-authorization" path="view-extra-work-authorization"/>
		</action>
		<action path="/extraWorkPaymentRequest"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.ExtraWorkPaymentRequestDispatchAction"
				parameter="method"
				scope="request"
				validate="true">
			<forward name="prepare-insert-payment-request" path="prepare-insert-payment-request"/>
			<forward name="insert-payment-request" path="insert-payment-request"/>
		</action>
		<action path="/monthClosure"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.MonthClosureDispatchAction"
				parameter="method"
				scope="request"
				validate="true"
				name="parametrizationForm">
			<forward name="close-month" path="close-month"/>
			<forward name="close-extra-work-month" path="close-extra-work-month"/>
			<forward name="export-work-absences-warning" path="export-work-absences-warning"/>
			<forward name="export-movements-warning" path="export-movements-warning"/>
		</action>
		<action path="/manageUnitsExtraWorkAmounts"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.ManageExtraWorkUnitAmountDispatchAction" 
				parameter="method"
				scope="request"
				validate="true">
				<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key="" 
					handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/> 				
			<forward name="show-units-extra-work-amounts" path="show-units-extra-work-amounts"/>
			<forward name="show-unit-extra-work-movements" path="show-unit-extra-work-movements"/>
		</action>		
		<action path="/exportExtraWork"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.ExportExtraWorkDispatchAction" 
				parameter="method"
				scope="request"
				validate="true">
				<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key="" 
					handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/>
				<forward name="choose-year-month" path="choose-year-month"/>
		</action>
		<action path="/vacationsManagement"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.managementAssiduousness.VacationsManagementDispatchAction" 
				parameter="method"
				scope="request"
				name="extraWorkForm"
				validate="true">
				<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key="" 
					handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/>
				<forward name="choose-year-month" path="choose-year-month"/>
		</action>
		<action path="/anualInstallments"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.personnelSection.payrollSection.AnualInstallmentsDispatchAction" 
				parameter="method"
				name="parametrizationForm"
				scope="request"
				validate="true">
				<forward name="show-anual-installment" path="show-anual-installment"/>
				<forward name="show-bonus-installment" path="show-bonus-installment"/>
		</action>
		<action path="/uploadAnualInstallments"
	    		type="net.sourceforge.fenixedu.presentationTier.Action.personnelSection.payrollSection.UploadAnualInstallments" 
				parameter="method"
				name="parametrizationForm"
				scope="request"
				validate="true">
				<forward name="upload-bonus-file" path="upload-bonus-file"/>
		</action>
 	</action-mappings>

	<!-- ========== Controller Configuration ================================ -->
	<controller processorClass="net.sourceforge.fenixedu.presentationTier.processor.FenixRequestProcessorWithTiles"/>

	<!-- ========== Message Resources Definitions ============================ -->
	<message-resources parameter="resources.AssiduousnessResources" null="false"/>
	<message-resources parameter="resources.AssiduousnessResources" key="ASSIDUOUSNESS_RESOURCES" null="false" />
	<message-resources parameter="resources.GlobalResources" key="GLOBAL_RESOURCES" null="false"/>
	<message-resources parameter="resources.ApplicationResources" key="APPLICATION_RESOURCES" null="false"/>
	<!-- ========== Plug Ins Configuration ================================= -->
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-managementAssiduousness.xml"/>
	</plug-in>

	<plug-in className="org.apache.struts.tiles.TilesPlugin" >
		<set-property property="definitions-config"
					  value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/personnelSection/tiles-personnelSection-definitions.xml,
					  /WEB-INF/tiles/personnelSection/tiles-managementAssiduousness-pages-definitions.xml,/WEB-INF/tiles/personnelSection/tiles-payrollSection-pages-definitions.xml" />
		<set-property property="moduleAware" value="true" />
		<set-property property="definitions-parser-validate" value="true" />
	</plug-in>    
	<plug-in
		className="pt.ist.fenixWebFramework.renderers.plugin.RenderersPlugin">
		<set-property property="config"
			value="/WEB-INF/fenix-renderers-config.xml" />
		<set-property property="schemas"
			value="/WEB-INF/schemas/fenix-renderers-schemas.xml" />
		<set-property property="metaObjectFactory"
			value="net.sourceforge.fenixedu.presentationTier.renderers.factories.FenixMetaObjectFactory" />
		<set-property property="userIdentityFactory"
			value="net.sourceforge.fenixedu.presentationTier.renderers.factories.FenixUserIdentityFactory" />
		<set-property property="schemaFactory"
			value="net.sourceforge.fenixedu.presentationTier.renderers.factories.FenixSchemaFactory" />
	</plug-in>
</struts-config>