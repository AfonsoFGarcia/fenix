<class-descriptor class="net.sourceforge.fenixedu.domain.cms.Cms" table="CMS_CMS">
    <field-descriptor
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />    
    <field-descriptor
        name="keyConfiguration"
        column="KEY_CONFIGURATION"
        jdbc-type="INTEGER"
    />   
    <field-descriptor
        name="name"
        column="NAME"
        jdbc-type="VARCHAR"
    />
	 <reference-descriptor auto-retrieve="false"
    	name="configuration"
        class-ref="net.sourceforge.fenixedu.domain.cms.infrastructure.CmsConfiguration">
	    <foreignkey field-ref="keyConfiguration"/>
	</reference-descriptor>
	<collection-descriptor proxy="true" auto-retrieve="false" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
			name="users"
			element-class-ref="net.sourceforge.fenixedu.domain.Person"
			>
		<inverse-foreignkey field-ref="keyCms"/>
	</collection-descriptor>
	<collection-descriptor proxy="true" auto-retrieve="false" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
			name="contents"
			element-class-ref="net.sourceforge.fenixedu.domain.cms.Content"
			>
		<inverse-foreignkey field-ref="keyCms"/>
	</collection-descriptor>			
</class-descriptor>

<class-descriptor class="net.sourceforge.fenixedu.domain.cms.Content">
    <extent-class class-ref="net.sourceforge.fenixedu.domain.cms.Bin" />
    <extent-class class-ref="net.sourceforge.fenixedu.domain.cms.messaging.MailMessage" />
    <extent-class class-ref="net.sourceforge.fenixedu.domain.cms.website.Website"/>
    <field-descriptor
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor
        name="creationDate"
        column="CREATION_DATE"
        jdbc-type="TIMESTAMP" conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.TimeStamp2DateFieldConversion"
	/>                     
    <field-descriptor
        name="keyCreator"
        column="KEY_CREATOR"
        jdbc-type="INTEGER"
    />   
    <field-descriptor
        name="name"
        column="NAME"
        jdbc-type="VARCHAR"
    />   
    <field-descriptor
        name="description"
        column="description"
        jdbc-type="VARCHAR"
    />           
    <field-descriptor
        name="keyCms"
        column="KEY_CMS"
        jdbc-type="INTEGER"
    />
	 <field-descriptor
        name="keyReadersGroup"
        column="KEY_READERS_GROUP"
        jdbc-type="INTEGER"
    />                  
    <field-descriptor
        name="keyWritersGroup"
        column="KEY_WRITERS_GROUP"
        jdbc-type="INTEGER"
    />
	 <reference-descriptor auto-retrieve="false"
    	name="readers"
        class-ref="net.sourceforge.fenixedu.domain.accessControl.UserGroup">
	    <foreignkey field-ref="keyReadersGroup"/>
	</reference-descriptor>	
	 <reference-descriptor auto-retrieve="false"
    	name="writers"
        class-ref="net.sourceforge.fenixedu.domain.accessControl.UserGroup">
	    <foreignkey field-ref="keyWritersGroup"/>
	</reference-descriptor>		                
	<reference-descriptor auto-retrieve="false"
    	name="cms"
        class-ref="net.sourceforge.fenixedu.domain.cms.Cms">
	    <foreignkey field-ref="keyCms"/>
	</reference-descriptor>	      
	 <reference-descriptor auto-retrieve="false"
    	name="creator"
        class-ref="net.sourceforge.fenixedu.domain.Person">
	    <foreignkey field-ref="keyCreator"/>
	</reference-descriptor>	 
	<collection-descriptor proxy="true" auto-retrieve="false" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
			name="parents"
			element-class-ref="net.sourceforge.fenixedu.domain.cms.Bin"
			indirection-table="CMS_CONTENT_HIERARCHY"
			>
		<fk-pointing-to-element-class column="KEY_PARENT"/>
		<fk-pointing-to-this-class column="KEY_CHILD" />	 
	</collection-descriptor>	
	<collection-descriptor proxy="true" auto-retrieve="false" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
			name="owners"
			element-class-ref="net.sourceforge.fenixedu.domain.Person"
			refresh="true" 
			indirection-table="CMS_CONTENT_OWNERSHIP">
		<fk-pointing-to-element-class column="KEY_OWNER"/>
		<fk-pointing-to-this-class column="KEY_CONTENT" />	
	</collection-descriptor>						
</class-descriptor>

<class-descriptor class="net.sourceforge.fenixedu.domain.cms.Bin">              
    <extent-class class-ref="net.sourceforge.fenixedu.domain.cms.messaging.MailingList" />
    <extent-class class-ref="net.sourceforge.fenixedu.domain.cms.messaging.MailConversation" />
    <field-descriptor
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor
        name="creationDate"
        column="CREATION_DATE"
        jdbc-type="TIMESTAMP" conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.TimeStamp2DateFieldConversion"
	/>                     
    <field-descriptor
        name="keyPerson"
        column="KEY_CREATOR"
        jdbc-type="INTEGER"
    />   
    <field-descriptor
        name="name"
        column="NAME"
        jdbc-type="VARCHAR"
    />   
    <field-descriptor
        name="description"
        column="description"
        jdbc-type="VARCHAR"
    />           
  <field-descriptor
        name="keyCms"
        column="KEY_CMS"
        jdbc-type="INTEGER"
    />     
     <field-descriptor
        name="keyReadersGroup"
        column="KEY_READERS_GROUP"
        jdbc-type="INTEGER"
    />                  
    <field-descriptor
        name="keyWritersGroup"
        column="KEY_WRITERS_GROUP"
        jdbc-type="INTEGER"
    />        
	 <reference-descriptor auto-retrieve="false"
    	name="readers"
        class-ref="net.sourceforge.fenixedu.domain.accessControl.UserGroup">
	    <foreignkey field-ref="keyReadersGroup"/>
	</reference-descriptor>	
	 <reference-descriptor auto-retrieve="false"
    	name="writers"
        class-ref="net.sourceforge.fenixedu.domain.accessControl.UserGroup">
	    <foreignkey field-ref="keyWritersGroup"/>
	</reference-descriptor>		    
	<reference-descriptor auto-retrieve="false"
    	name="cms"
        class-ref="net.sourceforge.fenixedu.domain.cms.Cms">
	    <foreignkey field-ref="keyCms"/>
	</reference-descriptor>	        
	 <reference-descriptor auto-retrieve="false"
    	name="creator"
        class-ref="net.sourceforge.fenixedu.domain.Person">
	    <foreignkey field-ref="keyPerson"/>
	</reference-descriptor>
	<collection-descriptor proxy="true" auto-retrieve="false" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
			name="children"
			element-class-ref="net.sourceforge.fenixedu.domain.cms.Content"
			indirection-table="CMS_CONTENT_HIERARCHY"
			>
		<fk-pointing-to-element-class column="KEY_CHILD"/>
		<fk-pointing-to-this-class column="KEY_PARENT" />	 
	</collection-descriptor>
	<collection-descriptor proxy="true" auto-retrieve="false" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
			name="parents"
			element-class-ref="net.sourceforge.fenixedu.domain.cms.Bin"
			indirection-table="CMS_CONTENT_HIERARCHY"
			>
		<fk-pointing-to-element-class column="KEY_PARENT"/>
		<fk-pointing-to-this-class column="KEY_CHILD" />	 
	</collection-descriptor>		
	<collection-descriptor proxy="true" auto-retrieve="false" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
			name="owners"
			element-class-ref="net.sourceforge.fenixedu.domain.Person"
			refresh="true" 
			indirection-table="CMS_CONTENT_OWNERSHIP">
		<fk-pointing-to-element-class column="KEY_OWNER"/>
		<fk-pointing-to-this-class column="KEY_CONTENT" />	
	</collection-descriptor>				
</class-descriptor>


<class-descriptor class="net.sourceforge.fenixedu.domain.cms.infrastructure.CmsConfiguration"
                  table="CMS_CONFIGURATION">                                    
    <field-descriptor
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    /> 
    <field-descriptor
        name="mailingListsHost"
        column="MAILING_LIST_HOST"
        jdbc-type="VARCHAR"
    />                           
    <field-descriptor
        name="smtpServerAddress"
        column="SMTP_SERVER_ADDRESS"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="filterNonTextualAttachments"
        column="FILTER_NON_TEXTUAL_ATTACHMENTS"
        jdbc-type="BIT"
    />        
    <field-descriptor
        name="conversationReplyMarkers"
        column="CONVERSATION_REPLY_MARKERS"
        jdbc-type="VARCHAR"
    />        
    <field-descriptor
        name="maxAttachmentSize"
        column="MAX_ATTACHMENT_SIZE"
        jdbc-type="INTEGER"
    />     
    <field-descriptor
        name="maxMessageSize"
        column="MAX_MESSAGE_SIZE"
        jdbc-type="INTEGER"
    />         
    <field-descriptor
        name="keyCms"
        column="KEY_CMS"
        jdbc-type="INTEGER"
    />        
	<reference-descriptor auto-retrieve="false"
    	name="cms"
        class-ref="net.sourceforge.fenixedu.domain.cms.Cms">
	    <foreignkey field-ref="keyCms"/>
	</reference-descriptor>    
</class-descriptor>
