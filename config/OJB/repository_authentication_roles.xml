<!-- ***********************************
     Definitions for Dominio.Pessoa 
     *********************************** -->
<class-descriptor class="Dominio.Pessoa"
                  table="PERSON">
    <field-descriptor
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor
        name="numeroDocumentoIdentificacao"
        column="DOCUMENT_ID_NUMBER"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="localEmissaoDocumentoIdentificacao"
        column="EMISSION_LOCATION_OF_DOCUMENT_ID"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="dataEmissaoDocumentoIdentificacao"
        column="EMISSION_DATE_OF_DOCUMENT_ID"
        jdbc-type="DATE"
    />
    <field-descriptor
        name="dataValidadeDocumentoIdentificacao"
        column="EXPERATION_DATE_OF_DOCUMENT_ID"
        jdbc-type="DATE"
    />
    <field-descriptor
        name="nome"
        column="NAME"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="nascimento"
        column="DATE_OF_BIRTH"
        jdbc-type="DATE"
    />
    <field-descriptor
        name="nomePai"
        column="NAME_OF_FATHER"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="nomeMae"
        column="NAME_OF_MOTHER"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="nacionalidade"
        column="NATIONALITY"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="freguesiaNaturalidade"
        column="PARISH_OF_BIRTH"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="concelhoNaturalidade"
        column="DISTRICT_SUBDIVISION_OF_BIRTH"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="distritoNaturalidade"
        column="DISTRICT_OF_BIRTH"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="morada"
        column="ADDRESS"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="localidade"
        column="AREA"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="codigoPostal"
        column="AREA_CODE"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="localidadeCodigoPostal"
        column="AREA_OF_AREA_CODE"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="freguesiaMorada"
        column="PARISH_OF_RESIDENCE"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="concelhoMorada"
        column="DISTRICT_SUBDIVISION_OF_RESIDENCE"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="distritoMorada"
        column="DISTRICT_OF_RESIDENCE"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="telefone"
        column="PHONE"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="telemovel"
        column="MOBILE"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="email"
        column="EMAIL"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="enderecoWeb"
        column="WEB_ADRDRESS"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="numContribuinte"
        column="SOCIAL_SECURITY_NUMBER"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="profissao"
        column="PROFESSION"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="username"
        column="USERNAME"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="password"
        column="PASSWD"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="chavePais"
        column="KEY_COUNTRY"
        jdbc-type="INTEGER"
    />
    <field-descriptor
        name="codigoFiscal"
        column="FISCAL_CODE"
        jdbc-type="VARCHAR"
    />
    <field-descriptor
        name="tipoDocumentoIdentificacao"
        column="TYPE_ID_DOCUMENT"
        jdbc-type="INTEGER"
		conversion="ServidorPersistente.Conversores.JavaTipoDocId2SqlTipoDocIdFieldConversion"
    />
    <field-descriptor
        name="sexo"
        column="SEX"
        jdbc-type="INTEGER"
		conversion="ServidorPersistente.Conversores.JavaSexo2SqlSexoFieldConversion"
    />
    <field-descriptor
        name="estadoCivil"
        column="MARITAL_STATUS"
        jdbc-type="INTEGER"
		conversion="ServidorPersistente.Conversores.JavaEstadoCivil2SqlEstadoCivilFieldConversion"
    />
    <reference-descriptor
         name="pais"
         class-ref="Dominio.Country"
         proxy="false"
    >
         <foreignkey field-ref="chavePais"/>
    </reference-descriptor>
    <collection-descriptor
         name="personRoles"
         element-class-ref="Dominio.Role"
         proxy="true"
         indirection-table = "PERSON_ROLE"
         auto-retrieve="true"
         refresh="true"
         auto-update="false"
         auto-delete="false"
      >
    	<fk-pointing-to-this-class  column="KEY_PERSON" />
    	<fk-pointing-to-element-class column="KEY_ROLE" />
      </collection-descriptor>    

    <collection-descriptor
         name="manageableDepartmentCredits"
         element-class-ref="Dominio.Department"
         proxy="true"
         indirection-table = "CREDITS_MANAGER_DEPARTMENT"
         auto-retrieve="true"
         refresh="true"
         auto-update="false"
         auto-delete="false"
      >
    	<fk-pointing-to-this-class  column="KEY_PERSON" />
    	<fk-pointing-to-element-class column="KEY_DEPARTMENT" />
      </collection-descriptor>    

    <collection-descriptor
         name="advisories"
         element-class-ref="Dominio.Advisory"
         proxy="true"
         indirection-table = "PERSON_ADVISORY"
         auto-retrieve="true"
         refresh="true"
         auto-update="false"
         auto-delete="false"
      >
    	<fk-pointing-to-this-class  column="KEY_PERSON" />
    	<fk-pointing-to-element-class column="KEY_ADVISORY" />
    	<query-customizer
	    	class="ServidorPersistente.customQueries.AdvisoryFilter">
	    </query-customizer>
      </collection-descriptor>    
      
	<attribute
     	attribute-name="cacheable"
     	attribute-value="false" />
      
</class-descriptor>
<!-- ***********************************
     Definitions for Dominio.Role 
     *********************************** -->
<class-descriptor class="Dominio.Role"
                  table="ROLE">
    <field-descriptor
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
        id="1"
    />

    <field-descriptor
        name="roleType"
        column="ROLE_TYPE"
        nullable = "false"
	conversion="ServidorPersistente.Conversores.RoleTypeFieldConversion"        
        jdbc-type="INTEGER"
        id="2"
    />
    <field-descriptor 
        name="portalSubApplication"
        column="PORTAL_SUB_APPLICATION"
		nullable="true"
        jdbc-type="VARCHAR"
        id="3"
    />
    <field-descriptor 
        name="page"
        column="PAGE"
		nullable="true"
        jdbc-type="VARCHAR"
        id="3"
    />
    <field-descriptor 
        name="pageNameProperty"
        column="PAGE_NAME_PROPERTY"
		nullable="true"
        jdbc-type="VARCHAR"
        id="4"
    />
<!--
    <collection-descriptor
         name="rolePersons"
         element-class-ref="Dominio.Pessoa"
         proxy="true"
         indirection-table = "PERSON_ROLE"
         auto-retrieve="true"
         auto-update="false"
         auto-delete="false"
      >
    	<fk-pointing-to-this-class  column="KEY_ROLE" />
    	<fk-pointing-to-element-class column="KEY_PERSON" />
    </collection-descriptor> 
-->
</class-descriptor>



<!-- ***********************************
     Definitions for Dominio.PersonRole 
     *********************************** -->
<class-descriptor class="Dominio.PersonRole"
                  table="PERSON_ROLE">
    <field-descriptor
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />

    <field-descriptor
        name="keyRole"
        column="KEY_ROLE"
        nullable = "false"
        jdbc-type="INTEGER"
    />
    <field-descriptor 
        name="keyPerson"
        column="KEY_PERSON"
		nullable="false"
        jdbc-type="INTEGER"
    />

      <reference-descriptor
         name="role"
         class-ref="Dominio.Role"
         proxy="false"
	  >
         <foreignkey field-ref="keyRole"/>
      </reference-descriptor>
      
     <reference-descriptor
         name="person"
         class-ref="Dominio.Pessoa"
         proxy="false"
	  >
         <foreignkey field-ref="keyPerson"/>
      </reference-descriptor>

</class-descriptor>



<!-- Definitions for Dominio.Student -->
   <class-descriptor
   	  class="Dominio.Student"
   	  table="STUDENT">
      <field-descriptor id="1"
         name="idInternal"
         column="ID_INTERNAL"
         jdbc-type="INTEGER"
         primarykey="true"
         autoincrement="true"
      />
      <field-descriptor id="2"
         name="number"
         column="NUMBER"
         jdbc-type="INTEGER"
      />
      <field-descriptor id="3"
         name="personKey"
         column="KEY_PERSON"
         jdbc-type="INTEGER"
      />
      <field-descriptor id="4"
         name="state"
         column="STATE"
         jdbc-type="INTEGER"
         conversion="ServidorPersistente.Conversores.JavaStudentState2SqlStudentStateFieldConversion"         
      />
      <field-descriptor id="5"
         name="degreeType"
         column="DEGREE_TYPE"
         jdbc-type="INTEGER"
         conversion="ServidorPersistente.Conversores.JavaTipoCurso2SqlTipoCursoFieldConversion"         
      />
      <field-descriptor id="6"
         name="studentKindKey"
         column="KEY_STUDENT_KIND"
         jdbc-type="INTEGER"
      />
      <reference-descriptor
         name="person"
         class-ref="Dominio.Pessoa"
         proxy="false"
         refresh="true">
         <foreignkey field-id-ref="3"/>
      </reference-descriptor>
	<reference-descriptor
			name="studentKind"
			class-ref="Dominio.StudentKind"
			proxy="false">
		<foreignkey field-ref="studentKindKey"/>
	</reference-descriptor>
     
   </class-descriptor>
<!-- Definitions for Dominio.Teacher -->
   <class-descriptor
   	  class="Dominio.Teacher"
   	  table="TEACHER">
   	  
      <field-descriptor
         name="idInternal"
         column="ID_INTERNAL"
         jdbc-type="INTEGER"
         primarykey="true"
         autoincrement="true"/>
      
      <field-descriptor
         name="teacherNumber"
         column="TEACHER_NUMBER"
         jdbc-type="INTEGER"/>

      <field-descriptor
         name="keyPerson"
         column="KEY_PERSON"
         jdbc-type="INTEGER"/>

      <reference-descriptor
         name="person"
         class-ref="Dominio.Pessoa"
         proxy="false">
         <foreignkey field-ref="keyPerson"/>
      </reference-descriptor>       

      <reference-descriptor
         name="person"
         class-ref="Dominio.Pessoa"
         proxy="false">
         <foreignkey field-ref="keyPerson"/>
      </reference-descriptor>       
    	
   </class-descriptor>