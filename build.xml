<?xml version="1.0" encoding="ISO-8859-1"?>
<project basedir="." default="compile" name="Fenix Build File">
<property environment="env"/>
<property name="findbugs.home" value="${env.FINDBUGS_HOME}" />

    <target name="clean-all"
    		description="Removes any generated files">
		<ant antfile="build_compile.xml" target="clean-all"/>
    </target>
	
	<target name="clean-gwt"
	    		description="Removes all generated files, including GWT artifacts">
			<ant antfile="build_compile.xml" target="clean-gwt"/>
	    </target>

    <target name="prepare"
    		description="Copy configuration files to compile dir">
		<ant antfile="build_compile.xml" target="prepare"/>
    </target>

	<target name="precompile" depends="prepare"
	    		description="Generate java code from a DML file">
			<ant antfile="build_compile.xml" target="generate"/>
    </target>

    <target name="install"
    		description="Deploys application to web server">
		<ant antfile="build_compile.xml" target="install"/>
    </target>

    <target name="findbugs" depends="compile">
	<ant target="findbugs-nocompile"/>
    </target>

    <target name="findbugs-nocompile">
	<taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask"/>
	 <findbugs home="${findbugs.home}"
              output="xml"
              outputFile="fenix-fb.xml"
	      timeout="1800000" >
	<auxClasspath path="${basedir}/web/WEB-INF/classes" />
      <sourcePath path="${basedir}/src" />
      <class location="${basedir}/web/WEB-INF/classes" />
    </findbugs>
  </target>

    <target name="reload"
    		description="Deploys application to web server">
    	<ant antfile="build_compile.xml" target="compile"/>
		<ant antfile="build_tomcat.xml" target="reload"/>
    </target>

    <target name="remove"
    		description="Deploys application to web server">
		<ant antfile="build_tomcat.xml" target="remove"/>
    </target>

    <target name="compile"
    		description="Compiles standalone application">
		<ant antfile="build_compile.xml" target="compile"/>
    </target>
	
	<target name="compile-with-gwtc"
			description="Same as 'compile' including the call to gwtc">
		<ant antfile="build_compile.xml" target="compile-with-gwtc"/>
	</target>

    <target name="war"
    		description="Generates a web archive of the application.">
		<ant antfile="build_compile.xml" target="war"/>
    </target>

    <target name="jar"
    		description="Generates a java archive applications 'core' (services and domain).">
		<ant antfile="build_compile.xml" target="jar"/>
    </target>

    <target name="jar-without-injectionCode"
    		description="Generates a java archive applications 'core' (services and domain), without code injection for access control">
		<ant antfile="build_compile.xml" target="jar-without-injectionCode"/>
    </target>
	
    <target name="jar-without-access-control"
    		description="Generates a java archive applications 'core' (services and domain), without code injection for access control">
		<ant antfile="build_compile.xml" target="jar-without-injectionCode"/>
    </target>

	<target name="jar-remote" description="Generates a java archive for remote clientes.">
		<ant antfile="build_compile.xml" target="jar-remote"/>
    </target>

    <target name="docs"
    		description="Generates fenix documentation">
		<ant antfile="build_renderers.xml" target="doc"/>
    </target>
	
	<target name="generateStubs" description="Generates stubs">
		<ant antfile="build_compile.xml" target="generateStubs"/>
    </target>
	
</project>
