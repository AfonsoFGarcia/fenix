#!/bin/sh
# -----------------------------------------------------------------------------
#
#   Runs sql scripts to update database from previous release.
#
# -----------------------------------------------------------------------------
#

echo Using database: $1
echo Enter password for $2:
read -s password

mysql -u$2 -f $1 < alterTableResidenceCandidacies.sql

# Fix Scripts
echo Changing Evaluation Table ... started
mysql -u$2 -f $1 < alterTableEvaluation.sql
echo Changing Evaluation Table ... completed
echo Fixing Person_Role table ... started
mysql -u$2 -f $1 < updatePersonRole.sql > res
mysql -u$2 -f $1 < res
rm -r res
echo Fixing Person_Role table ... completed
echo Altering Inquiries Tables ... started
mysql -u$2 -f $1 < AlterTablesInquiries.sql
echo Altering Inquiries Tables ... completed

echo Preparing Tables for Department Portal... started
mysql -u$2 -f $1 < createTableTeacherPersonalExpectation.sql
mysql -u$2 -f $1 < AlterTableRoleUpdateDeptAdminOfficeRole.sql
mysql -u$2 -f $1 < InsertDepartmentMemberRole.sql
mysql -u$2 -f $1 < UpdatePersonRoleWithDepartmentMemberRole.sql > res
mysql -u$2 -f $1 < res
rm -r res
echo Preparing Tables for Department Portal... completed

echo Preparing Tables Unit and Function... started
mysql -u$2 -f $1 < createContractTable.sql
mysql -u$2 -f $1 < alterTableUnit.sql
mysql -u$2 -f $1 < createFunctionTable.sql
mysql -u$2 -f $1 < createPersonFunctionTable.sql
mysql -u$2 -f $1 < addUnitTypes.sql
mysql -u$2 -f $1 < addUnitRealNames.sql
mysql -u$2 -f $1 < addDepartmentRealNames.sql
echo Preparing Tables Unit and Function... completed