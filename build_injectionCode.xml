<?xml version="1.0" encoding="ISO-8859-1"?>
<project basedir="." default="" name="Fenix Build File">
  <property environment="env"/>
  <property name="encoding" value="ISO-8859-1"/>	

	<property file="build.properties"/>

	<!-- Directories for compiled code -->
	<property name="build.home" location="build"/>
	<property name="build.home.webinf" value="${build.home}/WEB-INF"/>
	<property name="build.home.webinf.classes" value="${build.home.webinf}/classes"/>

	<path id="class.path.lib.ref">
        <fileset dir="${lib}">
   		    <include name="*.jar"/>
   		</fileset>
		<fileset dir="${build.home.webinf.libs}">
			<include name="*.jar"/>
		</fileset>
	</path>

	<taskdef name="injectCode" classname="net.sourceforge.fenixedu.injectionCode.injector.antTask.InjectCode">
		<classpath refid="class.path.lib.ref"/>
		<classpath>
      		<pathelement path="${build.home.webinf.classes}"/>
		</classpath>
	</taskdef>
		
	<target name="inject-accessControl-code">
		<injectCode verbose="false" 
				targetClassesDir="${build.home.webinf.classes}" 
				codeProducerClassName="net.sourceforge.fenixedu.injectionCode.FenixAccessControlCallsGenerator"
				annotation="net.sourceforge.fenixedu.injectionCode.Checked">
			<classpath refid="class.path.lib.ref"/>
			<classpath>
				<pathelement path="${build.home.webinf.classes}"/>
			</classpath>
			<fileset dir="${build.home.webinf.classes}">
				<include name="**/domain/**/*.class"/>
				<exclude name="**/domain/**/*_Base*"/>
				<exclude name="**/domain/RootDomainObject*"/>
			</fileset>
		</injectCode>
	</target>
	
	<target name="inject-domainObjectActionLog-code">
		<injectCode verbose="false" 
				targetClassesDir="${build.home.webinf.classes}" 
				codeProducerClassName="net.sourceforge.fenixedu.injectionCode.FenixDomainObjectLogCallsGenerator"
				annotation="net.sourceforge.fenixedu.injectionCode.FenixDomainObjectActionLogAnnotation">
			<classpath refid="class.path.lib.ref"/>
			<classpath>
				<pathelement path="${build.home.webinf.classes}"/>
			</classpath>
			<fileset dir="${build.home.webinf.classes}">
				<include name="**/domain/**/*.class"/>
				<exclude name="**/domain/**/*_Base*"/>
				<exclude name="**/domain/RootDomainObject*"/>
			</fileset>
		</injectCode>
	</target>	
	
	<target name="accessControl-void-inject">
		<injectCode verbose="false" 
				targetClassesDir="${build.home.webinf.classes}" 
				codeProducerClassName="net.sourceforge.fenixedu.injectionCode.FenixVoidAccessControlCallsGenerator"
				annotation="net.sourceforge.fenixedu.injectionCode.Checked">
			<classpath refid="class.path.lib.ref"/>
			<classpath>
				<pathelement path="${build.home.webinf.classes}"/>
			</classpath>

			<fileset dir="${build.home.webinf.classes}">
				<include name="**/domain/**/*.class"/>
				<exclude name="**/domain/**/*_Base*"/>
				<exclude name="**/domain/RootDomainObject*"/>
			</fileset>
		</injectCode>
	</target>

	<target name="domainObjectActionLog-void-inject">
		<injectCode verbose="false" 
				targetClassesDir="${build.home.webinf.classes}" 
				codeProducerClassName="net.sourceforge.fenixedu.injectionCode.FenixVoidAccessControlCallsGenerator"
				annotation="net.sourceforge.fenixedu.injectionCode.FenixDomainObjectActionLogAnnotation">
			<classpath refid="class.path.lib.ref"/>
			<classpath>
		    	<pathelement path="${build.home.webinf.classes}"/>
			</classpath>
			
			<fileset dir="${build.home.webinf.classes}">
				<include name="**/domain/**/*.class"/>
				<exclude name="**/domain/**/*_Base*"/>
				<exclude name="**/domain/RootDomainObject*"/>
			</fileset>
		</injectCode>
	</target>

</project>
