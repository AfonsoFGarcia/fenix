<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE struts-config PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
	"http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
    <!-- ========== Data Source Configuration =============================== -->
    
    <!-- ========== Form Bean Definitions ================================== -->
    <form-beans type="org.apache.struts.action.ActionFormBean">
		<form-bean name="candidacyForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
            <form-property name="method" type="java.lang.String" />
        </form-bean>
    </form-beans>

    <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
        <exception
			type="java.lang.Exception"
			key="error.Exception"
            handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
			/>
		<exception
			type="net.sourceforge.fenixedu.applicationTier.Servico.exceptions.NotAuthorizedException"
			key="error.NotAuthorized"
			handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
			/>
        <exception
            type="net.sourceforge.fenixedu.injectionCode.IllegalDataAccessException"
            key="error.NotAuthorized"
            handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"
            />
	</global-exceptions>

    <!-- ========== Global Forward Definitions =============================== -->
    <global-forwards type="org.apache.struts.action.ActionForward">
    </global-forwards>
    
    <!-- ========== Action Mapping Definitions =============================== -->
    <action-mappings type="org.apache.struts.action.ActionMapping">
        <action path="/index" type="net.sourceforge.fenixedu.presentationTier.Action.candidate.IndexAction">
            <forward name="showWelcome" path="index"/>
            <forward name="showCandidacyDetails" path="/degreeCandidacyManagement.do?method=showCandidacyDetails"/>
        </action>

		<action path="/changePersonalData"
				scope="request"		
		        parameter="method"
			    type="net.sourceforge.fenixedu.presentationTier.Action.candidate.ChangePersonalDataDispatchAction">
			<forward name="change" path="changePersonalData"/>
			<forward name="cannotChange" path="cannotChangePersonalData"/>
			<forward name="changeSuccess" path="changeSuccessPersonalData"/>
		</action>
		
		<action path="/viewCandidacies"
				scope="request"		
		        parameter="method"
		    	name="candidacyForm"
			    type="net.sourceforge.fenixedu.presentationTier.Action.candidate.ViewCandidaciesDsipatchAction">
			<forward name="view" path="viewCandidacies"/>
			<forward name="viewDetail" path="viewCandidacyDetails"/>
			<forward name="uploadDocuments" path="uploadDocuments" />
		</action>		


    <!-- ********************* DEGREE CANDIDACY ******************* -->	
    	<action path="/degreeCandidacyManagement"
			scope="request"
   			parameter="method"
   			type="net.sourceforge.fenixedu.presentationTier.Action.candidate.degree.DegreeCandidacyManagementDispatchAction">
      	    <forward name="showWelcome" path="degreeCandidacy.show.welcome" />
      	    <forward name="showCandidacyDetails" path="degreeCandidacy.show.candidacy.details" />
       	    <forward name="fillData" path="degreeCandidacy.fill.data" />
      	    <forward name="showData" path="degreeCandidacy.show.data" />
      	    <forward name="showOperationFinished" path="degreeCandidacy.show.operation.finished" />
      	    <forward name="printSchedule" path="/../commons/student/timeTable/classTimeTable.jsp" />
       	    <forward name="printRegistrationDeclaration" path="/degree/printRegistrationDeclaration.jsp" />
       	    <forward name="printSystemAccessData" path="/degree/printSystemAccessData.jsp" />
       	    <forward name="printUnder23TransportsDeclation" path="/degree/printUnder23TransportsDeclaration.jsp" />
       	    <forward name="printMeasurementTestDate" path="/degree/printMeasurementTestDate.jsp" />
       	    <forward name="printAllDocuments" path="/degree/printAllDocuments.jsp" />
       	    
      	</action>
	
    </action-mappings>

    <!-- ========== Controller Configuration ================================ -->
    <controller processorClass="net.sourceforge.fenixedu.presentationTier.processor.FenixRequestProcessorWithTiles"/>
    
    <!-- ========== Message Resources Definitions ============================ -->
	<message-resources parameter="resources.GlobalResources" key="GLOBAL_RESOURCES" null="false"/>
    <message-resources parameter="resources.ApplicationResources" key="APPLICATION_RESOURCES" null="false"/>
	<message-resources parameter="resources.CandidateResources" null="false" />

    <!-- ========== Plug Ins Configuration ================================= -->
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" 
                    value="/WEB-INF/validator-rules.xml,/WEB-INF/conf/validation-candidate.xml"/>
    </plug-in>    
    <plug-in className="org.apache.struts.tiles.TilesPlugin" >
        <set-property property="definitions-config" 
            value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/candidate/tiles-candidate-definitions.xml,/WEB-INF/tiles/candidate/tiles-candidate-pages-definitions.xml" />
        <set-property property="moduleAware" value="true" />
        <set-property property="definitions-parser-validate" value="true" />
    </plug-in>
</struts-config>
